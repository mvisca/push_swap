/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   push_swap_parse.c                                  :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: mvisca <mvisca@student.42.fr>              +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/07/04 17:02:40 by mvisca            #+#    #+#             */
/*   Updated: 2023/07/08 17:09:15 by mvisca           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <push_swap.h>

char	**args_to_tab(int ac, char **av, char **tab)
{
	int		i;

	if (ac == 1)
		return (NULL);
	else if (ac == 2)
	{
		tab = ft_split(av[1], 32);
		if (!tab)
			return (NULL);
		return (tab);
	}
	tab = (char **)malloc(sizeof(char *) * (ac));
	if (!tab)
		return (NULL);
	i = 0;
	while (i + 1 < ac)
	{
		tab[i] = ft_strdup(av[i + 1]);
		if (!tab[i++])
			return (NULL);
	}
	tab[i] = 0;
	return (tab);
}

static void	update_stack(t_stack **stack)
{
	t_list	*node;
	
	node = (*stack)->head;
	print_stack((*stack), "STACK TEST");
	while (node)
	{
		if (*(node->content) > (*stack)->max)
			(*stack)->max = *(node->content);
		if (*(node->content) < (*stack)->min)
			(*stack)->min = *(node->content); 
		node = node->next;
	}
	(*stack)->size = ft_lstsize((*stack)->head);
}

static t_list	*build_node(char *str)
{
	t_list	*new;

	new = malloc(sizeof(t_list));
	if (!new)	
		return (NULL);
	new->content = malloc(sizeof(int));
	if (!new->content)
		return (NULL);
	*(new->content) = (int)ft_atol(str);
	new->next = NULL;
	return (new);
}

t_stack	*tab_to_stack(char **tab, t_stack *stack)
{
	int		i;
	t_list	*new;
 
	i = 0;
	while (tab[i])
	{
		new = build_node(tab[i]);
		if (!new)
		{
			free_stack(stack);
			stack = NULL;
			return (NULL);
		}
		ft_lstadd_back(&(stack->head), new);
		i++;
	}
	update_stack(&stack);
	return (stack);
}

// -1758923379 1036546529 -1953565054 -425384884 -1382912534 864374183 -1576609047 1356702829 -1448319600 -1586696109 262587025 2117940966 1506979399 -1448713161 570159051 -71937477 -83041866 -1893012521 -802620367 -708852707 -25059339 -572263893 -269896344 246399277 771859591 1132308749 1193741365 -1970984570 1320768768 -1273099878 -1735577927 880868083 1641525759 -1860633967 1697435647 -951146786 1711602934 40737078 480031790 -1306480517 -614040803 1968974316 1139887958 1126317410 -1559877326 1631603304 -601044232 1797516912 -650978417 -2007226777 -1436322527 334932192 860239756 -2096502127 -1571386739 -561368156 -338224611 646834326 -1145107250 1987023965 -355870376 1238886175 -1923903494 -1317911272 -1545272629 1369563430 -1604063031 -1407585868 -1350270237 -1201049251 1594948948 1573906596 -1062562258 -737525957 -46845506 -462797831 -2124220295 -1772517649 -726445537 -1251028721 706346891 987554635 -297355960 -762162574 -1047118223 -1942909017 -1683420849 -2061718089 853389499 -1827306057 582832961 -1912816864 -1005866615 -1820027433 1322001093 755264691 -1321847399 1201835124 93430580 426707081 -1417496544 1085740135 -1592947823 -1615959132 1723042361 246694553 -2002673544 1682845453 -1844399567 -889621728 918220933 -231299899 -1914287543 -1580273731 -2090660388 -1193174460 -1148285434 -2141961084 617285867 -392083736 -1848327380 -336236839 1806989057 515678748 1912647343 -1637316147 -285667686 -545430107 -1469687279 -1031153423 -45853265 1178766907 -1255737172 -1139611736 2074484187 56820965 -1398905093 -1954253290 -1916356872 1342182473 1223155111 -251362346 983365379 -1365673726 1381383291 825547432 -1866825401 875086727 -735576771 1706240559 -1420462027 1130282227 -871368704 217611362 -328067241 -2012578840 -537661532 -791926857 1405767474 1516446219 -563472178 767128336 -407334514 -319736365 469835979 -1624318735 1807249603 -742193836 -1184639639 -1022693961 -453513953 1643663165 -1967505516 1752990606 894274347 -1510083645 -675905792 1006217909 47052493 -1238768734 -1124076633 327748638 -1473495726 1563936167 1245792251 -1196967334 1898037776 -238480550 -1286678031 -1273498355 1556369742 647297097 1789089373 1991754569 453173990 315792688 -1205368128 1453606871 -759390870 1698557907 1378693471 -2049079961 -1917891848 1360031102 501342585 561673697 1943622185 853711740 299215664 -1288263657 1354551716 -897952950 -586038076 1089313194 567213864 1132402443 -1870924489 -1073190648 1561741478 91195997 1504231200 1783566142 -1018487231 6160985 1657240190 466785668 944811521 -95010758 -675060150 -665472132 236418864 267154682 -1318624164 -456886463 -1335642420 -647715648 1093637950 -986763416 1399004948 -1272686628 -918913058 -810815746 1805094380 -2043372382 -791268122 -1314868900 1039636376 -82250087 -964047646 -1640854693 -1794249337 -1267827234 2022727340 1664000791 1896017953 662919340 -1091025819 -2004000121 1171537024 -1384872559 383280607 -400062792 1689001128 -1456461766 -973827870 -1390310469 -1427400423 -1525430760 1666696040 648850269 1001269398 -263321261 1056877402 1905929535 1485587006 1231195958 275459216 -1156188964 317099506 1224507645 -1083618713 -1287830004 233798573 1737096067 466424554 -635535394 -553400729 790944492 -843014741 1003681186 -2090971616 1340400043 992959011 -73219479 -286673036 -1807681889 -1743520589 1506661668 -1136939564 -1437573906 1216885881 1189654748 1199447264 -699634610 -1487842773 -1715987786 -1226999940 239624855 320831471 -661849972 1019310210 168001